<!DOCTYPE html>
<html>
  <head>
    <title>Mocha Tests</title>
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/expect.js/0.2.0/expect.min.js"></script>
    <script src="https://unpkg.com/@jupyterlab/services@^0.34/dist/index.js"></script>
    <script id='jupyter-config-data' type="application/json">{ "baseUrl": "{{base_url}}", "token": "{{token}}"}</script>
    <script>
    mocha.setup({
      ui: 'bdd',
      reporter: 'json-stream',
      retries: 1,
      fullTrace: true
    })
    </script>
    <script>

      describe('outer', function() {
        describe('Start Kernel', function() {

          it('should start a kernel', function(done) {
            window["@jupyterlab/services"].Kernel.startNew().then(function(kernel) { 
              return kernel.shutdown();
            }).then(done, done);
          });

        });
      });

      mocha.run(function(failures) {
        document.title = 'Test completed: ' + String(failures);
      });

    </script>
  </body>
</html>
